DROP PROCEDURE TYJINFWLIB.SP_TYCSI_CSI3011_UTIORDERF_UPDATE;

CREATE PROCEDURE TYJINFWLIB.SP_TYCSI_CSI3011_UTIORDERF_UPDATE 
( 
	IN P_GUBN		VARCHAR(1),
	IN P_JIYYMM		NUMERIC(8, 0) ,   
	IN P_JISEQ		NUMERIC(3, 0),   
	IN P_JIIPHANG		NUMERIC(8, 0),   
	IN P_JIBONSUN		VARCHAR(3),  
	IN P_JIHWAJU		VARCHAR(3),  
	IN P_JIHWAMUL		VARCHAR(3),  
	IN P_JIBLNO		VARCHAR(20),  
	IN P_JIMSNSEQ		NUMERIC(4, 0),   
	IN P_JIHSNSEQ		NUMERIC(4, 0),   
	IN P_JIACTHJ		VARCHAR(3),   
	IN P_JICUSTIL		NUMERIC(8, 0),   
	IN P_JICHASU		NUMERIC(3, 0),   
	IN P_JIJGHWAJU		VARCHAR(3),                        
	IN P_JIYSHWAJU		VARCHAR(3),                        
	IN P_JIYDHWAJU		VARCHAR(3),                        
	IN P_JIYSDATE		NUMERIC(8, 0),  
	IN P_JIYDSEQ		NUMERIC(2, 0),  
	IN P_JIYSSEQ		NUMERIC(2, 0),  
	IN P_JICHHJ		VARCHAR(3),  
	IN P_JITANKNO		VARCHAR(4),   
	IN P_JIIPTANK		VARCHAR(4),  
	IN P_JIIPQTY		NUMERIC(9, 3),   
	IN P_JIJEQTY		NUMERIC(9, 3),   
	IN P_JIJANQTY		NUMERIC(9, 3),   
	IN P_JIJANGB		VARCHAR(1),  
	IN P_JITRGUBN		VARCHAR(1),    
	IN P_JITRJISI1		VARCHAR(8),  
	IN P_JITRJISI2		NUMERIC(10, 0),   
	IN P_JICARNO1		VARCHAR(300),  
	IN P_JICARNO2		VARCHAR(20),  
	IN P_JICHJANG		VARCHAR(1),  
	IN P_JICHTYPE		VARCHAR(1),  
	IN P_JIUNIT		VARCHAR(1),  
	IN P_JIRACK		VARCHAR(2),  
	IN P_JIPUMP		VARCHAR(2),  
	IN P_JISINO1		NUMERIC(8, 0),     
	IN P_JISINO2		NUMERIC(8, 0),   
	IN P_JIORDNAME		VARCHAR(20),  
	IN P_JINAME		VARCHAR(30),  
	IN P_JIPHONE		VARCHAR(20),   
	IN P_JISEND		VARCHAR(1),  
	IN P_JISTMTQTY		NUMERIC(9, 3),  
	IN P_JIEDMTQTY		NUMERIC(9, 3),  
	IN P_JISTLTQTY		NUMERIC(9, 3),  
	IN P_JIEDLTQTY		NUMERIC(9, 3),  
	IN P_JICONTNUM		VARCHAR(50),                        
	IN P_JISILNUM		VARCHAR(50),                        
	IN P_JITMGUBN		VARCHAR(1),                        
	IN P_JIWKTYPE		VARCHAR(2),                        
	IN P_JITIMEHH		VARCHAR(2),                        
	IN P_JITIMEMM		VARCHAR(2),                        
	IN P_JIDNST		VARCHAR(3),                        
	IN P_JIHISAB		VARCHAR(6),    
	OUT RET_MSG		VARCHAR(100)		
)										    
    LANGUAGE SQL 
	SPECIFIC TYJINFWLIB.SP_TYCSI_CSI3011_UTIORDERF_UPDATE
	NOT DETERMINISTIC 
	MODIFIES SQL DATA 
	CALLED ON NULL INPUT 
	SET OPTION  ALWBLK = *ALLREAD , 
	ALWCPYDTA = *OPTIMIZE , 
	COMMIT = *NONE , 
	CLOSQLCSR = *ENDMOD , 
	DECRESULT = (31, 31, 00) , 
	DFTRDBCOL = *NONE , 
	DLYPRP = *NO , 
	DYNDFTCOL = *NO , 
	DYNUSRPRF = *USER , 
	RDBCNNMTH = *RUW , 
	SRTSEQ = *HEX   
    
P1 : BEGIN -- Ω√¿€

    
	IF P_GUBN = 'A' THEN

		INSERT INTO TYSCMLIB.UTIORDERF ( 
		JIYYMM,    
		JISEQ,     
		JIIPHANG,  
		JIBONSUN,  
		JIHWAJU,   
		JIHWAMUL,  
		JIBLNO,    
		JIMSNSEQ,  
		JIHSNSEQ,  
		JIACTHJ,    
		JICUSTIL,  
		JICHASU,   
		JIJGHWAJU,  
		JIYSHWAJU,  
		JIYDHWAJU,  
		JIYSDATE,   
		JIYDSEQ,    
		JIYSSEQ,    
		JICHHJ,    
		JITANKNO,   
		JIIPTANK,  
		JIIPQTY,   
		JIJEQTY,   
		JIJANQTY,  
		JIJANGB,   
		JITRGUBN,  
		JITRJISI1, 
		JITRJISI2, 
		JICARNO1,  
		JICARNO2,   
		JICHJANG,  
		JICHTYPE,  
		JIUNIT,    
		JIRACK,    
		JIPUMP,    
		JISINO1,   
		JISINO2,   
		JIORDNAME,   
		JINAME,   
		JIPHONE,    
		JISEND,   
		JISTMTQTY,  
		JIEDMTQTY,  
		JISTLTQTY,  
		JIEDLTQTY,  
		JICONTNUM,  
		JISILNUM,   
		JITMGUBN,   
		JIWKTYPE,   
		JITIMEHH,   
		JITIMEMM,   
		JIDNST,     
		JIHIGB,    
		JIHIDAT,   
		JIHITIM,   
		JIHISAB     
		)          
		VALUES (   
		P_JIYYMM,   
		P_JISEQ,   
		P_JIIPHANG,   
		P_JIBONSUN,  
		P_JIHWAJU,  
		P_JIHWAMUL,  
		P_JIBLNO,  
		P_JIMSNSEQ,   
		P_JIHSNSEQ,   
		P_JIACTHJ,    
		P_JICUSTIL,   
		P_JICHASU,   
		P_JIJGHWAJU,                        
		P_JIYSHWAJU,                        
		P_JIYDHWAJU,                        
		P_JIYSDATE,  
		P_JIYDSEQ,  
		P_JIYSSEQ,  
		P_JICHHJ,  
		P_JITANKNO,   
		P_JIIPTANK,  
		P_JIIPQTY,   
		P_JIJEQTY,   
		P_JIJANQTY,   
		P_JIJANGB,  
		P_JITRGUBN,    
		P_JITRJISI1,  
		P_JITRJISI2,   
		P_JICARNO1,  
		P_JICARNO2,  
		P_JICHJANG,  
		P_JICHTYPE,  
		P_JIUNIT,  
		P_JIRACK,  
		P_JIPUMP,  
		P_JISINO1,     
		P_JISINO2,   
		P_JIORDNAME,  
		P_JINAME,  
		P_JIPHONE,   
		P_JISEND,  
		P_JISTMTQTY ,  
		P_JIEDMTQTY ,  
		P_JISTLTQTY ,  
		P_JIEDLTQTY ,  
		P_JICONTNUM ,                        
		P_JISILNUM ,                        
		P_JITMGUBN ,                        
		P_JIWKTYPE ,                        
		P_JITIMEHH ,                        
		P_JITIMEMM ,                        
		P_JIDNST ,                        
		'A',  
		REPLACE(CHAR(CURRENT_DATE),'-',''),   
		REPLACE(CHAR(CURRENT_TIME),'.',''),
		P_JIHISAB     
		)  ;

	END IF;

	IF P_GUBN = 'C' THEN

		UPDATE TYSCMLIB.UTIORDERF SET 
		JIIPHANG  = P_JIIPHANG,   
		JIBONSUN  = P_JIBONSUN,  
		JIHWAJU   = P_JIHWAJU,  
		JIHWAMUL  = P_JIHWAMUL,  
		JIBLNO    = P_JIBLNO,  
		JIMSNSEQ  = P_JIMSNSEQ,   
		JIHSNSEQ  = P_JIHSNSEQ,   
		JIACTHJ   = P_JIACTHJ,  
		JICUSTIL  = P_JICUSTIL,   
		JICHASU   = P_JICHASU,   
		JIJGHWAJU = P_JIJGHWAJU,   
		JIYSHWAJU = P_JIYSHWAJU,   
		JIYDHWAJU = P_JIYDHWAJU,   
		JIYSDATE  = P_JIYSDATE,   
		JIYDSEQ   = P_JIYDSEQ,   
		JIYSSEQ   = P_JIYSSEQ,   
		JICHHJ    = P_JICHHJ,  
		JITANKNO  = P_JITANKNO,  
		JIIPTANK  = P_JIIPTANK,  
		JIIPQTY   = P_JIIPQTY,   
		JIJEQTY   = P_JIJEQTY,   
		JIJANQTY  = P_JIJANQTY,   
		JIJANGB   = P_JIJANGB,  
		JITRGUBN  = P_JITRGUBN,  
		JITRJISI1 = P_JITRJISI1,  
		JITRJISI2 = P_JITRJISI2,   
		JICARNO1  = P_JICARNO1,  
		JICARNO2  = P_JICARNO2,  
		JICHJANG  = P_JICHJANG,  
		JICHTYPE  = P_JICHTYPE,  
		JIUNIT    = P_JIUNIT,  
		JIRACK    = P_JIRACK,  
		JIPUMP    = P_JIPUMP,  
		JIORDNAME = P_JIORDNAME,  
		JINAME    = P_JINAME,  
		JIPHONE   = P_JIPHONE,  
		JISEND    = P_JISEND,  
		JISTMTQTY = P_JISTMTQTY,  
		JIEDMTQTY = P_JIEDMTQTY,  
		JISTLTQTY = P_JISTLTQTY,  
		JIEDLTQTY = P_JIEDLTQTY,  
		JICONTNUM = P_JICONTNUM,  
		JISILNUM  = P_JISILNUM,  
		JITMGUBN  = P_JITMGUBN,  
		JIWKTYPE  = P_JIWKTYPE,  
		JITIMEHH  = P_JITIMEHH,  
		JITIMEMM  = P_JITIMEMM,  
		JIDNST    = P_JIDNST,  
		JIHIGB    = 'C',  
		JIHIDAT   = REPLACE(CHAR(CURRENT_DATE),'-',''),   
		JIHITIM   = REPLACE(CHAR(CURRENT_TIME),'.',''),
		JIHISAB   = P_JIHISAB   
		WHERE JIYYMM = P_JIYYMM    
		AND   JISEQ  = P_JISEQ ;

	END IF;

	IF P_GUBN = 'D' THEN

		DELETE FROM TYSCMLIB.UTIORDERF 
		WHERE JIYYMM = P_JIYYMM
		AND   JISEQ  = P_JISEQ ;

	END IF;

	SET RET_MSG = 'SUCCESS!' ; 
END